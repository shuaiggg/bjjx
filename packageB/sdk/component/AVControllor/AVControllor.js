var eventEmitter=require("../../eventEmitter"),auth=require("../../auth"),config=require("../../config"),store=require("../../store"),language=require("../../language/main")(),info=require("../../info"),$=require("../../jquery");Component({properties:{},data:{status:{audioOn:!1,videoOn:!1}},ready:function(){this.initEvent()},methods:{initEvent:function(){var n=this;eventEmitter.on(eventEmitter.MEDIA_PUBLISH,function(e,t){var i=t.user;auth.isSelf(i.id)&&n.setData({status:{videoOn:i.videoOn,audioOn:i.audioOn}})}).on(eventEmitter.SPEAK_INVITE_RES_TRIGGER,function(e,t){t.accept&&t.force&&info.tip(language.INFO_HAS_BEEN_OPENED_SPEAKING)})},toolbarTap:function(e){var t=e.target.dataset.name,i={},n=store.get("class.speakState"),a=this.data.status;n==config.SPEAK_STATE_FREE?("micClose"==t&&(i.audioOn=!0),"micOpen"==t&&(i.audioOn=!1),"cameraClose"==t&&(i.videoOn=!0),"cameraOpen"==t&&(i.videoOn=!1),eventEmitter.trigger(eventEmitter.MEDIA_CONTROL_TRIGGER,$.extend(a,i))):info.tip(language.HANDUP_PLEASE)}}});