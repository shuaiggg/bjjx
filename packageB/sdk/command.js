var eventEmitter=require("./eventEmitter"),roomServer=require("./server/room");exports.messageTypes={logout:function(e,t){eventEmitter.trigger(eventEmitter.KICK_OUT)}},exports.send=function(e,t){var n=t.name,r=t.params;t={command_type:n},util.extend(t,r),roomServer.sendCommand(e,t)},exports.init=function(){eventEmitter.on(eventEmitter.COMMAND_SEND,function(e,t){exports.send(t.to,t)}).on(eventEmitter.COMMAND_RECEIVE,function(e,t){var n=t.fromId,r=t.command,o=exports.messageTypes[r.command_type];o&&o(n,r)}).on(eventEmitter.KICK_OUT_TRIGGER,function(e,t){exports.send(t.userId,{name:"logout"})})};