var isAlicloudImage=require("./isAlicloudImage");function compressImage(r,e,o,i,t,a){return{"x-oss-process":"image/"+(e||o?"resize,limit_0,"+(t?"m_lfit":"m_mfit")+",":"")+(e?"w_"+e+(o?",":"/"):"")+(o?"h_"+o+"/":"")+"quality,q_"+i+"/format,"+(a?"webp":r.toLowerCase())}}module.exports=function(r){var e=r.url;if(!isAlicloudImage(e))return e;var o=e.split(".").pop();"gif"===o&&(o="jpg");var i=Math.floor(90*(r.quality||1)),t=r.width,a=r.height;return e+"?"+compressImage(o,t=Math.floor(t),a=Math.floor(a),i,r.noCrop,r.hasWebp)};