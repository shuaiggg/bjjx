"use strict";var proxyServer,data,store=require("../store"),auth=require("../auth"),$=require("../jquery"),eventEmitter=require("../eventEmitter");function addCDN(e,r){var t={},i=[],o=function(e){return e.pull};$.each(e,function(e,r){t[o(r)]=1}),$.each(r,function(e,r){t[o(r)]||i.push(e)}),i.sort(function(e,r){return e-r});for(var n=0,a=i.length;n<a;n++)e.push(r[i[n]])}function addServer(t,e){$.isArray(e)||(e=[e]);var i={},o=function(e){return e.ip+e.port};$.each(t,function(e,r){i[o(r)]=1}),$.each(e,function(e,r){i[o(r)]||t.push(r)})}exports.init=function(){(data={roomServerList:[],chatServerList:[],liveServerList:[],udpUplinkServerList:[],udpDownlinkServerList:[],masterProxyServerList:[],roomProxyServerList:[],chatProxyServerList:[],activeMasterServer:{},activeRoomServer:{},activeLiveServer:{},useUdpPush:null,useUdpPull:null}).masterProxyServerList=store.get("partner.ms.proxy")},exports.getMasterProxyServerList=function(){return[]},exports.getRoomProxyServerList=function(){return[]},exports.setRoomProxyServerList=function(e){data.roomProxyServerList=e},exports.getChatProxyServerList=function(){return[]},exports.setChatProxyServerList=function(e){data.chatProxyServerList=e},exports.getRoomServerList=function(){return data.roomServerList},exports.addRoomServer=function(e){addServer(data.roomServerList,e)},exports.getChatServerList=function(){return data.chatServerList},exports.addChatServer=function(e){addServer(data.chatServerList,e)},exports.getLiveServerList=function(){return data.liveServerList},exports.addLiveServer=function(e){addCDN(data.liveServerList,e)},exports.getUdpUplinkServerList=function(){return data.udpUplinkServerList},exports.setUdpUplinkServerList=function(e){data.udpUplinkServerList=[],addServer(data.udpUplinkServerList,e)},exports.getUdpDownlinkServerList=function(){return data.udpDownlinkServerList},exports.setUdpDownlinkServerList=function(e){data.udpDownlinkServerList=[],addServer(data.udpDownlinkServerList,e)},exports.getActiveMasterServer=function(){return data.activeMasterServer},exports.setActiveMasterServer=function(e){data.activeMasterServer=e},exports.getActiveRoomServer=function(){return data&&data.activeRoomServer},exports.setActiveRoomServer=function(e){data.activeRoomServer=e},exports.getActiveChatServer=function(){return data&&data.activeChatServer},exports.setActiveChatServer=function(e){data.activeChatServer=e};