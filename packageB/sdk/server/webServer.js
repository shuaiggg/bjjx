var config=require("../config"),store=require("../store"),camelCaseObject=require("../function/camelCaseObject"),util=require("../util");function formatClass(e){e.id=""+e.id,e.hasMoreUser=!0,e.startTime=util.toTimestamp(e.startTime,0),e.endTime=util.toTimestamp(e.endTime,0),e.mediaType=util.toNumber(e.mediaType,config.MEDIA_TYPE_VIDEO),e.playBuffer=util.toNumber(e.playBuffer,0),e.speakState=util.toNumber(e.speakState,config.SPEAK_STATE_FREE),e.liveAudioCodec=util.toNumber(e.liveAudioCodec,config.AUDIO_CODEC_AAC)}exports.getPartnerInfo=function(a){var e=a.data,t={};if(e.sign){var i=e.user;i.type=util.toNumber(i.type),i.status=util.toNumber(i.status,config.USER_STATUS_ONLINE),i.number=""+i.number,i.actualName||(i.actualName=i.name),null==i.endType&&(i.endType=config.END_TYPE_WEIXIN_XIAOCHENGXU),e.class?formatClass(e.class):e.class={},e.userState={},t={room_id:e.class.id,user_number:i.number,user_name:i.name,user_avatar:i.avatar,user_role:i.type,sign:e.sign};var s=store.get("apiOrigin")+config.SDK_PARTNER_INFO_REQUEST_PATH}else{t={code:e.code,user_name:e.nickName};s=store.get("apiOrigin")+config.PARTNER_INFO_REQUEST_PATH}wx.request({url:s,data:t,success:function(e){0==(e=camelCaseObject(e)).data.code?a.onsuccess&&a.onsuccess(e):a.onfail&&a.onfail(e)},fail:function(e){a.onfail&&a.onfail(camelCaseObject(e))}})};